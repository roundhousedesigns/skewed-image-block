{"version":3,"file":"view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EACnD,MAAMC,cAAc,GAAGF,QAAQ,CAACG,gBAAgB,CAAC,sCAAsC,CAAC;EACxF,MAAMC,UAAU,GAAG,GAAG;EACtB,MAAMC,cAAc,GAAG,GAAG;EAE1B,IAAIC,OAAO,GAAG,KAAK;EACnB,IAAIC,eAAe,GAAGC,MAAM,CAACC,UAAU,IAAIL,UAAU;EAErD,MAAMM,cAAc,GAAGA,CAAA,KAAM;IAC5B,IAAI,CAACH,eAAe,EAAE;MACrBL,cAAc,CAACS,OAAO,CAACC,GAAG,IAAI;QAC7BA,GAAG,CAACC,KAAK,CAACC,SAAS,GAAG,qBAAqB;MAC5C,CAAC,CAAC;MACF;IACD;IAEAZ,cAAc,CAACS,OAAO,CAACC,GAAG,IAAI;MAC7B,MAAMG,SAAS,GAAGH,GAAG,CAACI,OAAO,CAAC,yBAAyB,CAAC;MACxD,MAAMC,IAAI,GAAGF,SAAS,CAACG,qBAAqB,CAAC,CAAC;MAE9C,MAAMC,cAAc,GAAGX,MAAM,CAACY,WAAW,GAAG,CAAC;MAC7C,MAAMC,aAAa,GAAGJ,IAAI,CAACK,GAAG,GAAIL,IAAI,CAACM,MAAM,GAAG,CAAE;MAClD,MAAMC,kBAAkB,GAAG,CAACH,aAAa,GAAGF,cAAc,IAAId,cAAc;MAE5EO,GAAG,CAACC,KAAK,CAACC,SAAS,GAAG,6BAA6BU,kBAAkB,MAAM;IAC5E,CAAC,CAAC;IACFlB,OAAO,GAAG,KAAK;EAChB,CAAC;EAED,MAAMmB,YAAY,GAAGA,CAAA,KAAM;IAC1B,MAAMC,eAAe,GAAGlB,MAAM,CAACC,UAAU,IAAIL,UAAU;IACvD,IAAIsB,eAAe,KAAKnB,eAAe,EAAE;MACxCA,eAAe,GAAGmB,eAAe;MACjChB,cAAc,CAAC,CAAC;IACjB;EACD,CAAC;EAEDF,MAAM,CAACP,gBAAgB,CAAC,QAAQ,EAAE,MAAM;IACvC,IAAI,CAACK,OAAO,IAAIC,eAAe,EAAE;MAChCC,MAAM,CAACmB,qBAAqB,CAACjB,cAAc,CAAC;MAC5CJ,OAAO,GAAG,IAAI;IACf;EACD,CAAC,EAAE;IAAEsB,OAAO,EAAE;EAAK,CAAC,CAAC;EAErBpB,MAAM,CAACP,gBAAgB,CAAC,QAAQ,EAAEwB,YAAY,EAAE;IAAEG,OAAO,EAAE;EAAK,CAAC,CAAC;EAElElB,cAAc,CAAC,CAAC;AACjB,CAAC,CAAC,C","sources":["webpack://rhd-skewed-image-block/./src/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tconst parallaxImages = document.querySelectorAll('.skewed-image-container.parallax img');\n\tconst BREAKPOINT = 999;\n\tconst PARALLAX_SPEED = 0.1;\n\n\tlet ticking = false;\n\tlet parallaxEnabled = window.innerWidth >= BREAKPOINT;\n\n\tconst updateParallax = () => {\n\t\tif (!parallaxEnabled) {\n\t\t\tparallaxImages.forEach(img => {\n\t\t\t\timg.style.transform = 'translate(-5%, -5%)';\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tparallaxImages.forEach(img => {\n\t\t\tconst container = img.closest('.skewed-image-container');\n\t\t\tconst rect = container.getBoundingClientRect();\n\n\t\t\tconst viewportMiddle = window.innerHeight / 2;\n\t\t\tconst elementMiddle = rect.top + (rect.height / 2);\n\t\t\tconst distanceFromCenter = (elementMiddle - viewportMiddle) * PARALLAX_SPEED;\n\n\t\t\timg.style.transform = `translate(-5%, calc(-5% - ${distanceFromCenter}px))`;\n\t\t});\n\t\tticking = false;\n\t};\n\n\tconst handleResize = () => {\n\t\tconst shouldBeEnabled = window.innerWidth >= BREAKPOINT;\n\t\tif (shouldBeEnabled !== parallaxEnabled) {\n\t\t\tparallaxEnabled = shouldBeEnabled;\n\t\t\tupdateParallax();\n\t\t}\n\t};\n\n\twindow.addEventListener('scroll', () => {\n\t\tif (!ticking && parallaxEnabled) {\n\t\t\twindow.requestAnimationFrame(updateParallax);\n\t\t\tticking = true;\n\t\t}\n\t}, { passive: true });\n\n\twindow.addEventListener('resize', handleResize, { passive: true });\n\n\tupdateParallax();\n});\n"],"names":["document","addEventListener","parallaxImages","querySelectorAll","BREAKPOINT","PARALLAX_SPEED","ticking","parallaxEnabled","window","innerWidth","updateParallax","forEach","img","style","transform","container","closest","rect","getBoundingClientRect","viewportMiddle","innerHeight","elementMiddle","top","height","distanceFromCenter","handleResize","shouldBeEnabled","requestAnimationFrame","passive"],"sourceRoot":""}