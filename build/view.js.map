{"version":3,"file":"view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,YAAY,GAAGA,CAAA,KAAM;EAC1B,MAAMC,iBAAiB,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,kCAAkC,CAAC,CAACC,MAAM,GAAG,CAAC;EAClG,IAAI,CAACH,iBAAiB,EAAE;IACvB;EACD;EAEA,MAAMI,cAAc,GAAGH,QAAQ,CAACC,gBAAgB,CAAC,sCAAsC,CAAC;EACxF,MAAMG,cAAc,GAAG,GAAG;EAE1B,IAAIC,OAAO,GAAG,KAAK;EAEnB,MAAMC,cAAc,GAAGA,CAAA,KAAM;IAC5BH,cAAc,CAACI,OAAO,CAACC,GAAG,IAAI;MAC7B,MAAMC,SAAS,GAAGD,GAAG,CAACE,OAAO,CAAC,yBAAyB,CAAC;MACxD,MAAMC,IAAI,GAAGF,SAAS,CAACG,qBAAqB,CAAC,CAAC;MAE9C,MAAMC,cAAc,GAAGC,MAAM,CAACC,WAAW,GAAG,CAAC;MAC7C,MAAMC,aAAa,GAAGL,IAAI,CAACM,GAAG,GAAIN,IAAI,CAACO,MAAM,GAAG,CAAE;MAClD,MAAMC,kBAAkB,GAAG,CAACH,aAAa,GAAGH,cAAc,IAAIT,cAAc;MAE5EI,GAAG,CAACY,KAAK,CAACC,SAAS,GAAG,8BAA8BF,kBAAkB,MAAM;IAC7E,CAAC,CAAC;IACFd,OAAO,GAAG,KAAK;EAChB,CAAC;EAED,MAAMiB,YAAY,GAAGA,CAAA,KAAM;IAC1BhB,cAAc,CAAC,CAAC;EACjB,CAAC;EAEDQ,MAAM,CAACS,gBAAgB,CAAC,QAAQ,EAAE,MAAM;IACvC,IAAI,CAAClB,OAAO,EAAE;MACbS,MAAM,CAACU,qBAAqB,CAAClB,cAAc,CAAC;MAC5CD,OAAO,GAAG,IAAI;IACf;EACD,CAAC,EAAE;IAAEoB,OAAO,EAAE;EAAK,CAAC,CAAC;EAErBX,MAAM,CAACS,gBAAgB,CAAC,QAAQ,EAAED,YAAY,EAAE;IAAEG,OAAO,EAAE;EAAK,CAAC,CAAC;EAElEnB,cAAc,CAAC,CAAC;AACjB,CAAC;;AAED;AACA,IAAIQ,MAAM,EAAEY,EAAE,EAAEC,MAAM,EAAE;EACvBD,EAAE,CAACE,QAAQ,CAAC,MAAM;IACjB9B,YAAY,CAAC,CAAC;EACf,CAAC,CAAC;AACH,CAAC,MAAM;EACNE,QAAQ,CAACuB,gBAAgB,CAAC,kBAAkB,EAAEzB,YAAY,CAAC;AAC5D,C","sources":["webpack://rhd-skewed-image-block/./src/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\nconst initParallax = () => {\n\tconst hasParallaxImages = document.querySelectorAll('.skewed-image-container.parallax').length > 0;\n\tif (!hasParallaxImages) {\n\t\treturn;\n\t}\n\n\tconst parallaxImages = document.querySelectorAll('.skewed-image-container.parallax img');\n\tconst PARALLAX_SPEED = 0.2;\n\n\tlet ticking = false;\n\n\tconst updateParallax = () => {\n\t\tparallaxImages.forEach(img => {\n\t\t\tconst container = img.closest('.skewed-image-container');\n\t\t\tconst rect = container.getBoundingClientRect();\n\n\t\t\tconst viewportMiddle = window.innerHeight / 2;\n\t\t\tconst elementMiddle = rect.top + (rect.height / 2);\n\t\t\tconst distanceFromCenter = (elementMiddle - viewportMiddle) * PARALLAX_SPEED;\n\n\t\t\timg.style.transform = `translate(50%, calc(-50% - ${distanceFromCenter}px))`;\n\t\t});\n\t\tticking = false;\n\t};\n\n\tconst handleResize = () => {\n\t\tupdateParallax();\n\t};\n\n\twindow.addEventListener('scroll', () => {\n\t\tif (!ticking) {\n\t\t\twindow.requestAnimationFrame(updateParallax);\n\t\t\tticking = true;\n\t\t}\n\t}, { passive: true });\n\n\twindow.addEventListener('resize', handleResize, { passive: true });\n\n\tupdateParallax();\n};\n\n// Check if we're in the WordPress admin area\nif (window?.wp?.blocks) {\n\twp.domReady(() => {\n\t\tinitParallax();\n\t});\n} else {\n\tdocument.addEventListener('DOMContentLoaded', initParallax);\n}\n"],"names":["initParallax","hasParallaxImages","document","querySelectorAll","length","parallaxImages","PARALLAX_SPEED","ticking","updateParallax","forEach","img","container","closest","rect","getBoundingClientRect","viewportMiddle","window","innerHeight","elementMiddle","top","height","distanceFromCenter","style","transform","handleResize","addEventListener","requestAnimationFrame","passive","wp","blocks","domReady"],"sourceRoot":""}